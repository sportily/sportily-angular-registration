{"version":3,"sources":["sportily.registration.all.js"],"names":["angular","module","call","this","NO_VALID_ROLES_MESSAGE","controller","$scope","$q","Form","AgeGroups","Organisations","Members","People","Roles","Seasons","Teams","RegistrationRoles","Users","fetchAgeGroups","fetchMember","fetchOrganisation","fetchSeasons","fetchTeams","findRole","roleIsValid","saveMember","savePerson","saveRoles","saveUser","verifyRoles","user","person","marketing_opt_in","roles","type","complete","getList","organisation_id","organisationId","then","typeOptions","state","agreement","dateOfBirth","selectedSeason","selectedRegionId","selectedAgeGroupId","_","find","t","system_role","requiresTeam","role","requires_team","addRole","push","removeRole","toBeRemoved","filter","rule","team_id","some","save","saving","isValid","member","season","error","seasons","_this","s","id","confirmationMessage","replace","name","window","parent","postMessage","scrollTo","showErrors","status","one","member_id","get","include","organisation","regions","data","map","r","unshift","length","season_id","ageGroups","ageGroupId","age_group_id","teams","competitions","email","post","when","user_id","person_id","reduce","p","resolve","getTeams","$watch","value","dob","input","output","Date","moment","date_of_birth","format","form","$setValidity","directive","restrict","templateUrl","scope","agreementMessage","adminUrl","paid","StripeService","PaymentService","Restangular","arePaymentsPossible","getTotal","financial_summary","owed","total","nationalId","orgs","organisations","Object","getOwnPropertyNames","forEach","prop","paymentsConfigured","paymentOrganisation","payment_details","stripe_user_id","message","template","pay","getSession","session","take","amount","redirectToPayment","team","currencyFilter","String","prototype","ucfirst","charAt","toUpperCase","slice","require","model","link","element","attrs","ngModel","each","$error","key","startsWith","transclude","ctrl","label","displayLabel","factory","$window","response","error_description","validation_messages","errors","$valid","reject","StripePublishableKey","SportilyApi","description","all","customGET","source","stripeAccountId","sessionId","stripe","Stripe","stripeAccount","redirectToCheckout","Transactions","Payments","getNational","getRegionals","national","stripeSessionId","nationalPromise","promises","region","source_id","target_id","target_organisation_id","method","transactions","stripe_payment_token","transaction_ids","transaction","run","$templateCache","put"],"mappings":"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","file":"sportily.registration.min.js"}