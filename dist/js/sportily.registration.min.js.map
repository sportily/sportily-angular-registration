{"version":3,"sources":["sportily.registration.all.js"],"names":["angular","module","call","this","NO_VALID_ROLES_MESSAGE","controller","$scope","$q","Form","AgeGroups","Organisations","Members","People","Roles","Seasons","Teams","Types","Users","fetchAgeGroups","fetchMember","fetchOrganisation","fetchSeasons","fetchTeams","roleIsValid","saveMember","savePerson","saveRoles","saveUser","verifyRoles","user","person","marketing_opt_in","roles","type","complete","types","typeOptions","_","map","value","key","label","name","index","sortBy","state","agreement","dateOfBirth","selectedSeason","selectedRegionId","selectedAgeGroupId","addRole","push","removeRole","toBeRemoved","filter","role","rule","requiresTeam","team_id","some","save","saving","isValid","then","member","season","error","find","seasons","_this","s","id","confirmationMessage","replace","window","parent","postMessage","scrollTo","showErrors","getList","organisation_id","organisationId","status","one","member_id","get","include","organisation","regions","data","r","unshift","length","season_id","ageGroups","ageGroupId","age_group_id","teams","t","competitions","email","post","when","user_id","person_id","reduce","p","resolve","getTeams","$watch","dob","input","output","Date","moment","date_of_birth","format","form","$setValidity","directive","restrict","templateUrl","scope","agreementMessage","adminUrl","paid","StripeService","PaymentService","Restangular","arePaymentsPossible","getNationalId","getTotal","financial_summary","owed","total","nationalId","orgs","organisations","Object","getOwnPropertyNames","forEach","prop","paymentsConfigured","nationalOrganisation","stripe_user_id","message","template","pay","getSession","session","take","amount","redirectToPayment","team","currencyFilter","String","prototype","ucfirst","charAt","toUpperCase","slice","require","model","link","element","attrs","ngModel","each","$error","startsWith","transclude","ctrl","displayLabel","factory","$window","response","error_description","validation_messages","errors","$valid","reject","StripePublishableKey","SportilyApi","description","all","customGET","source","stripeAccountId","sessionId","stripe","Stripe","stripeAccount","redirectToCheckout","Transactions","Payments","getNational","getRegionals","national","stripeSessionId","nationalPromise","promises","region","source_id","target_id","target_organisation_id","method","transactions","stripe_payment_token","transaction_ids","transaction","constant","player","coach","manager","official","committee","referee","timekeeper","player_training","player_recreational","player_cross_registration","run","$templateCache","put"],"mappings":"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","file":"sportily.registration.min.js"}