{"version":3,"sources":["sportily.registration.all.js"],"names":["angular","module","call","this","NO_VALID_ROLES_MESSAGE","controller","$scope","$q","Form","AgeGroups","Competitions","Members","People","Roles","Seasons","Teams","Types","Users","fetchAgeGroups","fetchCompetitions","fetchMember","fetchSeasons","fetchTeams","roleIsValid","saveMember","savePerson","saveRoles","saveUser","verifyRoles","user","person","marketing_opt_in","roles","type","complete","types","typeOptions","_","map","value","key","label","name","index","sortBy","state","agreement","dateOfBirth","selectedSeason","addRole","push","removeRole","toBeRemoved","filter","role","rule","competition_id","requiresTeam","team_id","some","save","saving","isValid","then","member","season","error","find","seasons","_this","s","id","confirmationMessage","replace","window","parent","postMessage","scrollTo","showErrors","getList","organisation_id","organisationId","status","one","member_id","get","season_id","include","competitions","ageGroups","teams","email","post","when","user_id","person_id","reduce","p","resolve","$watch","dob","input","output","Date","moment","date_of_birth","format","form","$setValidity","directive","restrict","templateUrl","scope","agreementMessage","adminUrl","paid","StripeService","Organisations","PaymentService","Restangular","arePaymentsPossible","getNationalId","getTotal","financial_summary","owed","total","nationalId","orgs","organisations","Object","getOwnPropertyNames","forEach","prop","paymentsConfigured","nationalOrganisation","stripe_user_id","message","template","pay","getSession","session","take","amount","redirectToPayment","team","data","currencyFilter","String","prototype","ucfirst","charAt","toUpperCase","slice","require","model","link","element","attrs","ngModel","each","$error","startsWith","transclude","ctrl","displayLabel","factory","$window","response","error_description","validation_messages","errors","$valid","reject","StripePublishableKey","SportilyApi","description","organisation","all","customGET","source","stripeAccountId","sessionId","stripe","Stripe","stripeAccount","redirectToCheckout","Transactions","Payments","getNational","getRegionals","national","regions","stripeSessionId","nationalPromise","promises","region","source_id","target_id","target_organisation_id","method","transactions","stripe_payment_token","transaction_ids","transaction","constant","player","coach","manager","official","committee","referee","timekeeper","player_training","player_recreational","player_cross_registration","run","$templateCache","put"],"mappings":"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","file":"sportily.registration.min.js"}