{"version":3,"sources":["sportily.registration.all.js"],"names":["angular","module","call","this","NO_VALID_ROLES_MESSAGE","controller","$scope","$q","Form","AgeGroups","Organisations","Members","People","Roles","Seasons","Teams","RegistrationRoles","Users","fetchAgeGroups","fetchMember","fetchOrganisation","fetchRoles","fetchSeasons","fetchTeams","findRole","roleIsValid","saveMember","savePerson","saveRoles","saveUser","verifyRoles","user","person","marketing_opt_in","roles","type","complete","one","get","organisation_id","organisationId","email","season_id","state","selectedSeason","then","typeOptions","requestedRoles","agreement","dateOfBirth","selectedRegionId","selectedAgeGroupId","findUser","getList","response","userExists","_","first","exists","find","t","system_role","requiresTeam","role","requires_team","addRole","push","removeRole","toBeRemoved","filter","rule","team_id","some","save","saving","isValid","member","season","error","seasons","_this","s","id","confirmationMessage","replace","name","window","parent","postMessage","scrollTo","showErrors","status","member_id","include","organisation","regions","data","map","r","unshift","length","ageGroups","ageGroupId","age_group_id","teams","competitions","post","when","user_id","person_id","reduce","p","resolve","getTeams","$watch","value","dob","input","output","Date","moment","date_of_birth","format","form","$setValidity","directive","restrict","templateUrl","scope","agreementMessage","adminUrl","paid","StripeService","PaymentService","Restangular","arePaymentsPossible","getTotal","financial_summary","owed","total","nationalId","orgs","organisations","Object","getOwnPropertyNames","forEach","prop","paymentsConfigured","paymentOrganisation","payment_details","stripe_user_id","message","template","pay","getSession","session","take","amount","redirectToPayment","team","currencyFilter","String","prototype","ucfirst","charAt","toUpperCase","slice","require","model","link","element","attrs","ngModel","each","$error","key","startsWith","transclude","ctrl","label","displayLabel","factory","$window","error_description","validation_messages","errors","$valid","reject","StripePublishableKey","SportilyApi","description","all","customGET","source","stripeAccountId","sessionId","stripe","Stripe","stripeAccount","redirectToCheckout","Transactions","Payments","getNational","getRegionals","national","stripeSessionId","nationalPromise","promises","region","source_id","target_id","target_organisation_id","method","transactions","stripe_payment_token","transaction_ids","transaction","run","$templateCache","put"],"mappings":"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","file":"sportily.registration.min.js"}