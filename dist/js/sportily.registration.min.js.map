{"version":3,"sources":["sportily.registration.all.js"],"names":["angular","module","call","this","NO_VALID_ROLES_MESSAGE","controller","$scope","$q","Form","AgeGroups","Organisations","Members","People","Roles","Seasons","Teams","RegistrationRoles","Users","fetchAgeGroups","fetchMember","fetchOrganisation","fetchRoles","fetchSeasons","fetchTeams","findRole","roleIsValid","saveMember","savePerson","saveRoles","saveUser","verifyRoles","user","person","marketing_opt_in","roles","type","complete","one","get","organisation_id","organisationId","email","season_id","state","selectedSeason","then","typeOptions","data","agreement","dateOfBirth","selectedRegionId","selectedAgeGroupId","findUser","getList","response","userExists","_","first","exists","find","t","system_role","requiresTeam","role","requires_team","addRole","push","removeRole","toBeRemoved","filter","rule","team_id","some","save","saving","isValid","member","season","error","seasons","_this","s","id","confirmationMessage","replace","name","window","parent","postMessage","scrollTo","showErrors","status","member_id","include","organisation","regions","map","r","unshift","length","ageGroups","ageGroupId","age_group_id","teams","competitions","post","when","user_id","person_id","reduce","p","resolve","getTeams","$watch","value","dob","input","output","Date","moment","date_of_birth","format","form","$setValidity","directive","restrict","templateUrl","scope","agreementMessage","adminUrl","paid","StripeService","PaymentService","Restangular","arePaymentsPossible","getTotal","financial_summary","owed","total","nationalId","orgs","organisations","Object","getOwnPropertyNames","forEach","prop","paymentsConfigured","paymentOrganisation","payment_details","stripe_user_id","message","template","pay","getSession","session","take","amount","redirectToPayment","team","currencyFilter","String","prototype","ucfirst","charAt","toUpperCase","slice","require","model","link","element","attrs","ngModel","each","$error","key","startsWith","transclude","ctrl","label","displayLabel","factory","$window","error_description","validation_messages","errors","$valid","reject","StripePublishableKey","SportilyApi","description","all","customGET","source","stripeAccountId","sessionId","stripe","Stripe","stripeAccount","redirectToCheckout","Transactions","Payments","getNational","getRegionals","national","stripeSessionId","nationalPromise","promises","region","source_id","target_id","target_organisation_id","method","transactions","stripe_payment_token","transaction_ids","transaction","run","$templateCache","put"],"mappings":"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","file":"sportily.registration.min.js"}