{"version":3,"sources":["sportily.registration.all.js"],"names":["angular","module","call","this","NO_VALID_ROLES_MESSAGE","controller","$scope","$q","Form","AgeGroups","Organisations","Members","People","Roles","Seasons","Teams","RegistrationRoles","Users","fetchAgeGroups","fetchMember","fetchOrganisation","fetchRoles","fetchSeasons","fetchTeams","findRole","roleIsValid","saveMember","savePerson","saveRoles","saveUser","verifyRoles","user","person","marketing_opt_in","roles","type","complete","one","get","organisation_id","organisationId","email","season_id","state","selectedSeason","then","typeOptions","requestedRoles","agreement","dateOfBirth","selectedRegionId","selectedAgeGroupId","findUser","getList","response","userExists","_","first","exists","data","find","t","system_role","requiresTeam","role","requires_team","addRole","push","removeRole","toBeRemoved","filter","rule","team_id","some","save","saving","isValid","member","season","error","seasons","_this","s","id","confirmationMessage","replace","name","window","parent","postMessage","scrollTo","showErrors","status","member_id","include","organisation","regions","map","r","unshift","length","ageGroups","ageGroupId","age_group_id","teams","competitions","post","when","user_id","person_id","reduce","p","resolve","getTeams","$watch","value","dob","input","output","Date","moment","date_of_birth","format","form","$setValidity","directive","restrict","templateUrl","scope","agreementMessage","adminUrl","paid","StripeService","PaymentService","Restangular","arePaymentsPossible","getTotal","financial_summary","owed","total","nationalId","orgs","organisations","Object","getOwnPropertyNames","forEach","prop","paymentsConfigured","paymentOrganisation","payment_details","stripe_user_id","message","template","pay","getSession","session","take","amount","redirectToPayment","team","currencyFilter","String","prototype","ucfirst","charAt","toUpperCase","slice","require","model","link","element","attrs","ngModel","each","$error","key","startsWith","transclude","ctrl","label","displayLabel","factory","$window","error_description","validation_messages","errors","$valid","reject","StripePublishableKey","SportilyApi","description","all","customGET","source","stripeAccountId","sessionId","stripe","Stripe","stripeAccount","redirectToCheckout","Transactions","Payments","getNational","getRegionals","national","stripeSessionId","nationalPromise","promises","region","source_id","target_id","target_organisation_id","method","transactions","stripe_payment_token","transaction_ids","transaction","run","$templateCache","put"],"mappings":"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","file":"sportily.registration.min.js"}